<html><head>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="utils.js"></script>
<script src="translate.js"></script>
<script src="transformator.js"></script>
<script src="api_access.js"></script>
</head>
<body>

<div id="table_container">

	<!-- table will appear here. -->

	<div id="table_activity_indicator">
		Loading Table. Please wait a sec...
	</div>
</div>

<script>

//function to be called after ajax query
function showTable(input_obj){
	document.getElementById("table_activity_indicator").remove();
	document.getElementById("table_container").appendChild(
			createTable(
				input_obj,
				getColumns(),
				transformator
			)
		);
}

//read out query, create api param string
var params = get_params();
var param_str = "";
for(i in api_config.accepted_params) {
	if(api_config.accepted_params[i] in params) {
		if(param_str != "") param_str = param_str+"&";
		param_str = param_str + api_config.accepted_params[i] + "=" + params[api_config.accepted_params[i]];
}

//execute ajax query, and call showTable afterwards
//just pass the whole page query to the api
query_api(params,showTable);

</script>


</body>
</html>
