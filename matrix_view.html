<html><head>
<link rel="stylesheet" type="text/css" href="matrix_view.css">
<script src="js/utils.js"></script>
<script src="js/api_config.js"></script>
<script src="js/matrix_transformator.js"></script>
<script src="js/matrix.js"></script>
<script src="js/api_access.js"></script>
</head>
<body>

<div id="table_container">

	<!-- table will appear here. -->

	<div id="table_activity_indicator">
		Loading Table. Please wait a sec...
	</div>
</div>

<script>

//function to be called after ajax query
function showTable(input_obj){
	document.getElementById("table_activity_indicator").remove();
	document.getElementById("table_container").appendChild(
			createTable(
				input_obj,
				Object.keys(api_columns()),
				transformator
			)
		);
}

//read out query, create api param string
var params = get_params();

//execute ajax query, and call showTable afterwards
//just pass the whole page query to the api
query_api(params,showTable);

</script>


</body>
</html>
